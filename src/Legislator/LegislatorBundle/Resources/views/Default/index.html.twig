{% extends "::base.html.twig" %}

{% block title %}Legislator{% endblock %}

{% block body %}
<div class="row">
<div class="large-12 columns">

<p>Vitajte v aplikacii Legislator.</p>

{% if documents|length > 0 %}
    <h2>{% trans %}document.listing{% endtrans %}</h2>
    <table>
	<thead>
		<tr>
			<th>#</th>
			<th>Nazov</th>
			<th>Popis</th>
			<th>Status</th>
			<th>Vlozil</th>
			<th>Cas vytvorenia</th>
			<th>Cas poslednej zmeny</th>
			<th>Action</th> {# TODO check privileges #}
		</tr>
	</thead>
	<tbody>
	{% for d in documents %}
		<tr>
			<td>1.</td>
			<td><a href="{{ path('legislator_view', {'id': d.id}) }}">{{ d.name }}</a></td>
			<td>{{ d.description|trim(100) }}</td>
			<td>{{ d.status }}</td>
			<td>{{ d.createdBy.surname }}</td>
			<td>{{ d.createdOn|date('d.m.Y H:i:s') }}</td>
			<td>{{ d.modifiedOn|date('d.m.Y H:i:s') }}</td>
			{# TODO check privileges #}
			<td>
			{% if app.user and d.createdBy.id == app.user.id %}
			    <form method="post" action="{{ path('legislator_delete', {'id': d.id}) }}" class="action">
			        <input type="submit" value="delete" class="small delete button"/>
			    </form>
			{% endif %}
			</td>
		</tr>
	{% endfor %}
	</tbody>
    </table>
{% else %}
    <p>There is no document yet.</p>
{% endif %}

<p>
{% if can_add_document %}
<a href="{{ path('legislator_new') }}" class="button">{% trans %}button.document.add{% endtrans %}</a>
{% else %}
To add a document you need to <a href="{{ path('fos_user_security_login') }}">log in</a> first.
{% endif %}
</p>

</div>
</div>
{% endblock %}
